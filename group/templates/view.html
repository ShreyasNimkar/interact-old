{% extends 'basemain.html' %}
{% load static %}
{% block title %}{{group.name}}{%endblock%}

{% block css %}
<link rel="stylesheet" href="{%static 'feed.css'%}">
<style>
    .logo {
        max-height: 5vh;
        max-width: 8vh;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-top: 0;
    }

    .logo a {
        max-width: 8vh;
        height: 6vh;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .logo a img {
        max-width: 7vw;
    }

    * {
        margin: 0;
    }

    body {
        background-image: none;
    }

    nav {
        background-color: rgb(36, 36, 36);
        font-family: "Quicksand";
        z-index: 10;
    }

    nav div {
        color: rgb(226, 226, 226);
    }

    nav {
        width: 100vw;
        height: 6vh;
    }





    .listhead {
        overflow-x: hidden;
        width: 80vw;
        height: 12vh;
        display: grid;
        grid-template-columns: 30vw 25vw 20vw;
        color: white;
    }

    .list {
        overflow-x: hidden;
        width: 80vw;
        height: 60vh;
        color: white;
    }

    .items {
        padding: 2vh;
        height: 6vh;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 20px;
        font-family: 'Quicksand';
    }

    .members {
        display: grid;
        grid-template-columns: 30vw 25vw 20vw;
        height: 8vh;
    }

    .members div {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5vw;
        font-family: 'Quicksand';
        font-size: 20px;
    }
    .members div a {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5vw;
        font-family: 'Quicksand';
        font-size: 20px;
    }

    .heading {
        font-weight: 700;
        padding-bottom: 0;
    }

    .line {
        grid-column-start: 1;
        grid-column-end: 5;
        background-color: white;
        width: 70vw;
        height: 2px;
        margin-left: 5vw;
    }

    .create a:hover {
        text-decoration: underline;
        font-size: 32px;
    }

    .items a:hover {
        text-decoration: underline;
    }





    .container {
        margin: auto;
        width: 80vw;
        height: 94vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        background-color: rgb(58, 58, 58, 0.8);
        border: 4px solid rgb(70, 70, 70);
        border-width: 0px 4px 0px 4px;
        overflow-x: hidden;
        overflow-y: scroll;
    }

    .profile {
        width: 70vw;
        height: 50vh;
    }

    .profile {
        display: flex;
        align-items: center;
        justify-content: space-evenly;
    }

    .img {
        width: 32vh;
        height: 32vh;
        border-radius: 100%;
        z-index: 50;
    }

    .img img {
        width: 32vh;
        height: 32vh;
        border-radius: 100%;
        border: 2px solid white;
        z-index: 50;
    }

    .text {
        width: 40vw;
        display: flex;
        flex-direction: column;
        gap: 2vh;
    }

    .namemain {
        font-weight: 700;
        font-size: 40px;
        display: flex;
        gap: 1vw;
    }

    .bio {
        color: white;
        font-family: 'Quicksand';
        height: 16vh;
    }

    .completenamemain {
        font-family: 'Quicksand';
        color: rgb(172, 172, 172);
        z-index: 10;
        display: flex;
        justify-content: space-between;
    }

    .values {
        display: flex;
        justify-content: space-evenly;
    }

    .value {
        color: white;
        display: flex;
        flex-direction: column;
        align-items: center;
        font-family: 'Quicksand';
        font-size: 20px;
    }

    .adminbtn {
        width: 4vw;
        height: 3vh;
        background-color: rgb(119, 119, 119);
        font-size: 15px;
        border-radius: 10px;
        border: 1px solid black;
    }

    .adminbtn div {
        font-size: 15px;
    }
    .makeadminbtn {
        width: 7vw;
        height: 3vh;
        background-color: rgb(39, 39, 39);
        font-size: 15px;
        border-radius: 10px;
        border: 1px solid black;
    }

    .makeadminbtn div {
        font-size: 15px;
    }

    .confirmdeletemember {
        font-size: 18px;
        width: 15vw;
        text-align: right;
        display: none;
    }

    .confirmdeletemember a {
        font-weight: 400;
        font-size: 15px;
        margin-right: 0.5vw;
    }
    .followbtn form input{
        font-family: 'Quicksand';
        border-radius: 15px;
        margin-top: 2vh;
        width: 10vh;
        height: 4vh;
        font-size: 15px;
        background-color: rgb(218, 218, 218);
        border: 2px solid black;
    }
    .value .downs{
        font-weight: 700;
    }

    .show {
        display: block;
    }

    .hide {
        display: none;
    }
    .edit input{
        width: 5vh;
        height: 5vh;
    }
</style>
{% endblock %}

{% block main %}
{% load custom_tags %}
<nav>
    <div class="logo">
        <a href="/user/feed/"><img src="{% static 'white with underline.png' %}" alt=""></a>
    </div>
    <div class="nav_items">
        <a href="/user/feed/">
            <div>Feed</div>
        </a>
        <a href="/grp/view/">
            <div>Explore</div>
        </a>
        <a href="/grp/joinchat">
            <div> Groups</div>
        </a>
    </div>
    <a href="/logout">
        <div class="logout">logout</div>
    </a>
</nav>

<div class="container">
    <div class="profile">
        <div class="img">
            <img src="/media/{{group.icon}}" alt="">
        </div>
        <div class="text">
            <div class="completenamemain">
                <div>
                    <div class="namemain">
                        <strong>{{group.name}}</strong>
                        {% if request.user in admins %}
                    <form action="" class="edit"><input type="image" src="{% static 'edit.png' %}"></form>
                    {% endif %}
                    </div>
                </div>

                {% if request.user in members %}
                <div class="followbtn">
                    <form action="/grp/leave/{{group.slug}}"><input type="submit" name="" value="Leave" style="width: 11vh; color:black"></form>
                </div>
                {%else%}
                <div class="followbtn">
                    <form action="/grp/join/{{group.slug}}"><input type="submit" name="" value="Join"></form>
                </div>
                {% endif %}
            </div>
            <div class="bio">
                {{group.description}}
            </div>
            <div class="values">
                <div class="value">
                    <div class="ups">{{members|length}}</div>
                    <div class="downs">Members</div>
                </div>
                <div class="value">
                    <div class="ups">{{active|length}}</div>
                    <div class="downs">Active Members</div>
                </div>
                <div class="value">
                    <div class="ups">{{group.date_created}}</div>
                    <div class="downs">Date Created</div>
                </div>
            </div>
        </div>
    </div>
    <div class="listhead">
        <div class="items heading">
            <div>Name</div>
        </div>
        <div class="items heading">
            <div>Date Joined</div>
        </div>
        <div class="items heading">
            <div></div>
        </div>
        <div class="item line"></div>
    </div>
    <div class="list">
        {% if request.user in admins %}

        {%for member in members%}
        <div class="members">
            <div>
                <a href="/user/view/{{member.username}}">
                <img src="/media/{{member.profile_pic}}" alt="" style="width: 5vh; height: 5vh; border-radius: 100%;">
                <div>{{member.name}}</div>
                </a>
                {%if member in admins%}
                <div class="adminbtn">
                    <div>Admin</div>
                </div>
                {% else %}
                {% if request.user in admins %}
                <div class="makeadminbtn">
                    <div>Make Admin</div>
                </div>
                {% endif %}
                {% endif %}
                
            
            </div>
            <div>
                {{dates|index:forloop.counter0}}
            </div>
            <div>
                <div class="deletemember" id="{{member.username}}deletebtn"><a
                        onclick="removemember('{{member.username}}')">X</a></div>
            </div>
        </div>
        {%endfor%}

        {% else %}

        {%for member in members%}
        <div class="members">
            <div>
                <a href="/user/view/{{member.username}}">
                    <img src="/media/{{member.profile_pic}}" alt="" style="width: 5vh; height: 5vh; border-radius: 100%;">
                    <div>{{member.name}}</div>
                    </a>
                {%if member in admins%}
                <div class="adminbtn">
                    <div>Admin</div>
                </div>
                {% endif %}
            </div>
            <div>
                {{dates|index:forloop.counter0}}
            </div>
            <div>

            </div>
        </div>
        {%endfor%}

        {% endif %}

    </div>
</div>
<script>
    function removemember(id) {
        confirmdelete = document.getElementById(id + "delete")
        deletebtn = document.getElementById(id + "deletebtn")
        deletebtn.classList.toggle('hide')
    }
</script>
{%endblock%}